import{_ as O,d as n,g as i,e,l as _,n as b,t as d,q as R,m as h,s as G,F as J,p as Y,u as j,r as c,c as B,o as P,b as C,y as z,k as s}from"./index-Dy1_wJKI.js";import{F as q}from"./Footer-component-Jen5bCQl.js";import{L as K}from"./LazyImage-CTPPnyAo.js";import{N as W,L as Q}from"./NetworkErrorComponent-BwqVMyze.js";import{C as X}from"./ChatbotComponent-KlukNhEg.js";const Z=Object.assign({name:"AccountPage"},{__name:"AccountPage",setup(S,{expose:t}){t();const f=j(),o=c(null),p=c(null),k=c(!0),l=c(null),a=c({name:"",nik:"",email:"",lastLogin:(()=>{const r=new Date,v=r.getHours().toString().padStart(2,"0"),g=r.getMinutes().toString().padStart(2,"0"),y=r.getDate(),N=(r.getMonth()+1).toString().padStart(2,"0"),E=r.getFullYear();return`${y}/${N}/${E}, ${v}.${g}`})(),healthStatus:"Good",profileCompleted:85}),U=B(()=>a.value.name!==""&&a.value.nik!==""),u=c(!1),m=c(""),w=c("success"),x=c(!1),F=()=>{x.value=!x.value},H=()=>{o.value.click(),x.value=!1},T=()=>{p.value=null,localStorage.removeItem("userPhotoUrl"),u.value=!0,m.value="Foto profil telah dihapus",w.value="info",setTimeout(()=>{u.value=!1},3e3),x.value=!1},V=r=>{const v=r.target.files[0];if(v&&v.type.match("image.*")){if(v.size>5*1024*1024){u.value=!0,m.value="File terlalu besar. Maksimal ukuran 5MB.",w.value="error",setTimeout(()=>{u.value=!1},3e3);return}const g=new FileReader;g.onload=y=>{p.value=y.target.result,a.value.profileCompleted<100&&(a.value.profileCompleted+=5,a.value.profileCompleted>100&&(a.value.profileCompleted=100)),localStorage.setItem("userPhotoUrl",p.value),u.value=!0,m.value="Foto profil berhasil diperbarui!",w.value="success",setTimeout(()=>{u.value=!1},3e3)},g.readAsDataURL(v)}else v&&(u.value=!0,m.value="Format file tidak didukung. Gunakan file gambar.",w.value="error",setTimeout(()=>{u.value=!1},3e3))};P(()=>{const r=localStorage.getItem("userPhotoUrl");r&&(p.value=r),M()});const M=async()=>{try{k.value=!0,l.value=null;const r=C.getCurrentUser();if(r){if(a.value={...a.value,name:r.name||"User",nik:r.nik||"",email:r.email||""},navigator.onLine){const v=await z.get("/api/v1/auth/profile"),g=v.data||v;g&&g.data&&(a.value={...a.value,name:g.data.name||a.value.name,email:g.data.email||a.value.email})}}else f.push("/")}catch(r){console.error("Error loading user data:",r),l.value={title:"Failed to load profile",message:r.message||"Could not load your profile data. Please try again."}}finally{k.value=!1}},D=()=>{try{C.logout(),u.value=!0,m.value="Logged out successfully",w.value="info",setTimeout(()=>{f.push("/")},1500)}catch(r){console.error("Logout error:",r),u.value=!0,m.value="Error during logout",w.value="error"}},I=()=>{f.push("/history")},A=c([{icon:"heart",label:"Heart Rate",value:"72 bpm",trend:"stable"},{icon:"pressure",label:"Blood Pressure",value:"120/80",trend:"improved"},{icon:"activity",label:"Activity",value:"6.2k steps",trend:"decreased"}]),L={router:f,fileInput:o,userPhotoUrl:p,isLoading:k,error:l,user:a,isUserDataLoaded:U,showNotification:u,notificationMessage:m,notificationType:w,showPhotoOptions:x,togglePhotoOptions:F,triggerFileInput:H,removePhoto:T,handleFileUpload:V,loadUserData:M,logout:D,goToHistory:I,healthData:A,ref:c,onMounted:P,computed:B,get useRouter(){return j},FooterComponent:q,LazyImage:K,get apiService(){return z},get authService(){return C},LoadingComponent:Q,NetworkErrorComponent:W,ChatbotComponent:X};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),$={class:"account-page"},ee={class:"flex items-center"},te={key:0,class:"mr-3"},oe={key:1,class:"mr-3"},re={key:2,class:"mr-3"},se={class:"font-medium"},le={class:"relative bg-gradient-to-b from-blue-500 via-blue-600 to-indigo-700 min-h-screen overflow-hidden"},ne={class:"container max-w-5xl mx-auto py-12 px-4 relative z-10"},ae={key:1,class:"mb-8 text-center"},ie={class:"text-4xl font-bold text-white mb-2 tracking-tight"},de={key:2,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ue={class:"lg:col-span-1"},ce={class:"bg-white/95 backdrop-blur-md rounded-xl shadow-lg overflow-hidden transform hover:translate-y-[-5px] transition-all duration-300"},ve={class:"relative"},ge={class:"relative z-10 p-6 text-center"},he={class:"relative inline-block mb-3"},me={key:0,class:"h-24 w-24 rounded-full overflow-hidden border-4 border-white shadow-lg mx-auto"},we=["src"],pe={key:1,class:"h-24 w-24 flex items-center justify-center bg-white rounded-full p-4 border-4 border-white shadow-lg mx-auto"},fe={key:2,class:"absolute bottom-8 right-0 bg-white rounded-md shadow-lg overflow-hidden z-20 min-w-[180px]"},xe={class:"py-1"},ke={class:"text-2xl font-bold text-white mb-1"},be={class:"text-blue-100 text-sm"},ye={class:"bg-white/10 backdrop-blur-sm px-6 py-3"},_e={class:"flex items-center justify-between text-white"},Ce={class:"text-xs font-bold"},Me={class:"mt-2 h-1.5 bg-white/20 rounded-full overflow-hidden"},Le={class:"p-6"},je={class:"space-y-4"},Be={class:"health-status-card bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100"},Pe={class:"flex justify-between items-center mb-2"},ze={class:"health-badge"},Se={class:"form-field"},Ue={class:"form-field font-mono"},Fe={class:"form-field text-blue-600"},He={class:"form-field"},Te={class:"lg:col-span-2"},Ve={class:"bg-white/95 backdrop-blur-md rounded-xl shadow-lg overflow-hidden mb-6 transform hover:translate-y-[-5px] transition-all duration-300"},De={class:"p-6"},Ie={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ae={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ne={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ee={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Oe={class:"mt-2"},Re={class:"text-sm text-gray-500"},Ge={class:"text-xl font-bold text-gray-800"},Je={class:"mt-2 flex items-center"},Ye={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},qe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ke={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"};function We(S,t,f,o,p,k){return s(),n("div",$,[o.showNotification?(s(),n("div",{key:0,class:b(["fixed top-6 right-6 z-50 px-4 py-3 rounded-lg shadow-lg transition-all duration-300 transform translate-y-0 opacity-100",{"bg-green-100 border-l-4 border-green-500 text-green-700":o.notificationType==="success","bg-red-100 border-l-4 border-red-500 text-red-700":o.notificationType==="error","bg-blue-100 border-l-4 border-blue-500 text-blue-700":o.notificationType==="info"}])},[e("div",ee,[o.notificationType==="success"?(s(),n("div",te,t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):i("",!0),o.notificationType==="error"?(s(),n("div",oe,t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))):i("",!0),o.notificationType==="info"?(s(),n("div",re,t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))):i("",!0),e("p",se,d(o.notificationMessage),1)])],2)):i("",!0),e("div",le,[t[26]||(t[26]=e("div",{class:"absolute inset-0 z-0"},[e("div",{class:"floating-shape shape-1"}),e("div",{class:"floating-shape shape-2"}),e("div",{class:"floating-shape shape-3"})],-1)),e("div",ne,[_(o.LoadingComponent,{"is-loading":o.isLoading,message:"Loading your profile...","full-page":!1},null,8,["is-loading"]),o.error&&!o.isLoading?(s(),R(o.NetworkErrorComponent,{key:0,title:o.error.title,message:o.error.message,"retry-action":o.loadUserData},null,8,["title","message"])):i("",!0),!o.isLoading&&!o.error?(s(),n("div",ae,[t[3]||(t[3]=e("div",{class:"inline-block px-4 py-2 rounded-full bg-blue-500/20 backdrop-blur-sm border border-blue-400/20 text-blue-100 text-sm mb-4"}," User Profile ",-1)),e("h1",ie," Welcome, "+d(o.user.name),1),t[4]||(t[4]=e("p",{class:"text-blue-100/80"},"Manage your account and view your health information",-1))])):i("",!0),!o.isLoading&&!o.error&&o.isUserDataLoaded?(s(),n("div",de,[e("div",ue,[e("div",ce,[e("div",ve,[t[10]||(t[10]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 to-indigo-600 opacity-90"},null,-1)),e("div",ge,[e("div",he,[o.userPhotoUrl?(s(),n("div",me,[e("img",{src:o.userPhotoUrl,alt:"Profile Photo",class:"h-full w-full object-cover"},null,8,we)])):(s(),n("div",pe,t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-14 w-14 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)]))),e("div",{class:"absolute bottom-0 right-0 bg-blue-500 hover:bg-blue-600 p-1.5 rounded-full cursor-pointer border-2 border-white shadow-md transition-all duration-200 group",onClick:o.togglePhotoOptions},[t[6]||(t[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("input",{type:"file",ref:"fileInput",accept:"image/*",class:"hidden",onChange:o.handleFileUpload},null,544)]),o.showPhotoOptions?(s(),n("div",fe,[e("div",xe,[e("button",{onClick:o.triggerFileInput,class:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),h(" Upload Foto ")])),o.userPhotoUrl?(s(),n("button",{key:0,onClick:o.removePhoto,class:"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100"},t[8]||(t[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),h(" Hapus Foto ")]))):i("",!0)])])):i("",!0)]),e("h2",ke,d(o.user.name),1),e("p",be," Member since "+d(o.user.lastLogin.split(",")[0]),1)]),e("div",ye,[e("div",_e,[t[9]||(t[9]=e("span",{class:"text-xs font-medium"},"Profile completed",-1)),e("span",Ce,d(o.user.profileCompleted)+"%",1)]),e("div",Me,[e("div",{class:"h-full bg-gradient-to-r from-green-400 to-blue-500 rounded-full",style:G({width:o.user.profileCompleted+"%"})},null,4)])])]),e("div",Le,[e("div",je,[e("div",Be,[e("div",Pe,[t[11]||(t[11]=e("h3",{class:"font-medium text-gray-700"},"Health Status",-1)),e("span",ze,d(o.user.healthStatus),1)]),t[12]||(t[12]=e("p",{class:"text-sm text-gray-500"}," Your health data is regularly monitored by our system ",-1))]),e("div",null,[t[13]||(t[13]=e("label",{class:"flex items-center text-gray-700 text-sm font-medium mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),h(" Full Name ")],-1)),e("div",Se,d(o.user.name),1)]),e("div",null,[t[14]||(t[14]=e("label",{class:"flex items-center text-gray-700 text-sm font-medium mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})]),h(" NIK ")],-1)),e("div",Ue,d(o.user.nik),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"flex items-center text-gray-700 text-sm font-medium mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),h(" Email ")],-1)),e("div",Fe,d(o.user.email),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"flex items-center text-gray-700 text-sm font-medium mb-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),h(" Last Login ")],-1)),e("div",He,d(o.user.lastLogin),1)])]),e("div",{class:"mt-8"},[e("button",{onClick:o.logout,class:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white py-3 px-5 rounded-md transition-all duration-200 flex items-center justify-center"},t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),h(" Logout ")]))])])])]),e("div",Te,[e("div",Ve,[t[25]||(t[25]=e("div",{class:"bg-gradient-to-r from-blue-500 to-indigo-600 px-6 py-5"},[e("h3",{class:"text-xl font-bold text-white flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),h(" Health Snapshot ")])],-1)),e("div",De,[e("div",Ie,[(s(!0),n(J,null,Y(o.healthData,(l,a)=>(s(),n("div",{key:a,class:"health-data-card"},[e("div",{class:b(["health-data-icon","icon-"+l.icon])},[l.icon==="heart"?(s(),n("svg",Ae,[...t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])])):i("",!0),l.icon==="pressure"?(s(),n("svg",Ne,[...t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},null,-1)])])):i("",!0),l.icon==="activity"?(s(),n("svg",Ee,[...t[20]||(t[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)])])):i("",!0)],2),e("div",Oe,[e("div",Re,d(l.label),1),e("div",Ge,d(l.value),1)]),e("div",Je,[e("span",{class:b(["trend-indicator","trend-"+l.trend])},[l.trend==="improved"?(s(),n("svg",Ye,[...t[21]||(t[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"},null,-1)])])):i("",!0),l.trend==="decreased"?(s(),n("svg",qe,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"},null,-1)])])):i("",!0),l.trend==="stable"?(s(),n("svg",Ke,[...t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14"},null,-1)])])):i("",!0)],2),e("span",{class:b(["text-xs ml-1",{"text-green-600":l.trend==="improved","text-red-600":l.trend==="decreased","text-gray-500":l.trend==="stable"}])},d(l.trend==="improved"?"Improved":l.trend==="decreased"?"Decreased":"Stable"),3)])]))),128))]),e("div",{class:"mt-6"},[e("button",{onClick:o.goToHistory,class:"view-history-btn"},t[24]||(t[24]=[h(" View Complete Health History "),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-1 transition-transform group-hover:translate-x-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])])])):i("",!0)])]),_(o.FooterComponent),_(o.ChatbotComponent)])}const tt=O(Z,[["render",We],["__scopeId","data-v-83d41bdb"],["__file","D:/test-project/se/jantungin/JantungIn/JantungIn-FE/src/Page/User/AccountPage.vue"]]);export{tt as default};
